#### 语法

正则表达式的字符分为

* 普通字符
  * 可打印字符
  * 不可打印字符
  
    
  
* 元字符，需要使用本义时通过`\`转义输出

  * `.`匹配除`\n`和`\r`之外任意单个字符，要匹配这两字符需要使用像`[\n\N]`的模式

  * `\`转义元字符为原义字符

  * `|`或，`xx|cc`匹配xx或者cc。

  * `?`匹配其前字符0次或1次

  * `{n}`其前字符重复n次

  * `{n,m}`其前字符重复最少n~最多m次

  * 贪婪版本次数，**贪婪版本的匹配，在匹配时是多多益善的，会一直匹配直到文本末尾，而不是在第一次匹配时就停止**

    * `*`其前字符可重复任意次
    * `+`匹配其前字符1次或多次
    * `{n,}`其前字符重复n及n次以上

  * 懒惰匹配：碰到第一次匹配时就停止

    * `*?`其前字符可重复任意次
    * `+?`匹配其前字符1次或多次
    * `{n,}?`其前字符重复n及n次以上`[a|b]`匹配a或者b，择其一
    * `??`
    * `{n,m}?`

  * `[xyz]`定义一个集合，匹配其中任意一个字符

  * `[^xyz]`定义一个排除集合，匹配一个不包含在其中的字符

  * `[a-z]`匹配一个范围中一个字符

  * `[^a-z]`匹配一个不包含在范围中的字符

  * `[\b]`回退

  * `\f`换页符

  * `\n`换行符

  * `\r`回车键

  * `\t`制表符

  * `\v`垂直制表符

  * `\d`表示一个数字字符

  * `\D`表示一个非数字字符

  * `\w`一个字母、数字或下划线字符

  * `\W`非数字字母下划线

  * `\s`任意一个空白字符

  * `\S`任意一个非空白字符

  * ```c
    // POSIX形式
    [[:alnum:]]	字母和数字
    [_[:alnum:]]	字母，数字以及下划线
    [^_[:alnum:]]	非字母，数字以及下划线
    [[:digit:]]		数字
    [^[:digit:]]	非数字
    [[:space:]]		空白字符
    [^[:space:]]	非空白字符
    [[:lower:]]	小写字母
    [[:upper:]]	大写字母
    [[:alpha:]]	任意字母
    [[:blank:]]	非换行符的空白字符
    [[:cntrl:]]	控制字符
    [[:graph:]]	图形字符
    [[:print:]]	可打印字符
    [[:punct:]]	标点字符
    [[:xdigit:]] 十六进制的数字字符
    ```

  * **边界限定**

    * `\b`匹配一个边界，例子：`\bxxx\b`表示这个单词是独立的，`\bxxx`表示xxx是某个单词的开头。
    * `\B`匹配一个非边界，例子：`\Bxxx\B`表示xxx单词一定在某个单词内部中间
    * `^`|`$`首和尾，用来表示一大段文本的边界。`^xxx`表示xxx是这段文本开头的匹配。
    * `(?m)`正常情况下一个文本匹配`^|$`只匹配到一行，`regex_constants::multiline`或者在模式前写`(?m)`开启多行模式，多行模式开启后，`(?m)^x$`会匹配每个为x的行

  * `(表达式)`，将某些模式匹配用小括号括住后其等价于1个字符的使用，如：`(表达式)?`?匹配前一个字符，在这里就是匹配前一个表达式，**表达式支持嵌套表达式**

#### 进制

使用其他进制是允许的，需要给出前缀。**使用其他进制会被转化为对应十进制对应的ASCLL码所代表的含义**

* `\x`十六进制
* `\0`八进制

#### 回溯引用

回溯引用，使得我们可以引用前面已经匹配的字符串来匹配当前字符串，**这样做的功能使得我们可以多个匹配的结果保持一致。** **将要同步结果的一个表达式用括号括住**

* `\0`整个模式串
* `\1`匹配模式中第一个子表达式的结果，如第一个子表达式匹配到字符串`xx`，当前`\1`也必须匹配到`xx`
* `\2`匹配模式中第二个子表达式的结果
* `\3`
* ...

**替换时需要两个模式，替换用的模式可以引用匹配模式中的子表达式，但是符号稍有不同，使用`$1`、`$2`...**

#### 替换

`$n`引用前一个模式中的子表达式

* `\E`结束标志
* `\l`把下一个字符转换为小写
* `\L`把`\L`到`\E`之间的字符全部转为小写
* `\u`把下一个字符转换为大写
* `\U`把`\U`到`\E`之间的字符全部转换为大写

例子，替换模式：`\U$1\E`把$1转换为大写

#### 小技巧

* `\r\n`在windows每行末尾换行时都插入`\r\n`组合，但在`Linux`每行只插入`\n`，因此要匹配一个空行`[\r]?\n[\r]?\n`这样

#### 向前/后查找

* 正向前查找：`(?=要匹配的模式)`。例子：`(?=:)`。这个和`(:)`的差别在于，两者都要匹配`:`但是前者是匹配`:`之前的部分，不包含`:`
* 正向后查找：`(?<=要匹配的模式)`向后匹配，不包含当前匹配到的模式
* 负向前查找：`(?!)`
* 负向后查找：`(?<!)`

#### 嵌入条件

在表达式内部嵌入条件处理。

* `(?(引用)模式)`其中模式仅在引用匹配到才执行，注意这里的引用，直接写数字`1`，不需要`\1`
* `(?(?=模式)成功匹配模式)`向前向后模式成功匹配时才执行后面的模式